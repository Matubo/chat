(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{84:function(e,t,n){},89:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var s=n(1),o=n.n(s),r=n(22),a=n.n(r),c=n(14),u=n(19),m=n(47),i=n(7),b=n.n(i),j=n(5),g=n(45),f=n.n(g)()("http://localhost:3001"),p=function(e,t){f.emit("message_to_room",e,t)},l=function(e){f.emit("join_to_room",e)};f.on("accept_change_username",(function(e){U.dispatch({type:"accept_change_username",username:e})})),f.on("new_message_on_room",(function(e){U.dispatch({type:"new_message_on_room",room:e})})),f.on("accept_join_to_room",(function(e){U.dispatch({type:"accept_join_to_room",room:e})}));var x=b.a.mark(C),_=b.a.mark(D),O=b.a.mark(I),d=b.a.mark(z),h=b.a.mark(T),v=b.a.mark(S),w=function(e){return e.rooms},N=function(e){return e.room},y=function(e){return e.roomID};function k(e){!function(e){f.emit("change_username",e)}(e)}function C(e){var t;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.username,n.next=3,Object(j.a)({type:"set_username",username:t,authorized:!0});case 3:case"end":return n.stop()}}),x)}function R(e){var t=e.roomNumber;l(t)}function D(e){var t,n,s;return b.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.room,o.next=3,Object(j.b)(w);case 3:if(n=o.sent,void 0!=n.find((function(e){return e.number==t.number}))){o.next=16;break}return n.push(t),s=n.slice(0),o.next=10,Object(j.a)({type:"set_new_rooms",rooms:s});case 10:return o.next=12,Object(j.b)(y);case 12:if(null!=o.sent){o.next=16;break}return o.next=16,Object(j.a)({type:"set_room",roomID:0});case 16:case"end":return o.stop()}}),_)}function I(e){var t,n,s;return b.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.roomID,o.next=3,Object(j.b)(y);case 3:if(o.sent==t){o.next=11;break}return o.next=7,Object(j.b)(w);case 7:return n=o.sent,s=n[t],o.next=11,Object(j.a)({type:"set_main_data",roomID:t,messages:s.messages,room:s.number});case 11:case"end":return o.stop()}}),O)}function z(e){var t,n,s,o;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.room,r.next=3,Object(j.b)(w);case 3:return n=r.sent,r.next=6,Object(j.b)(N);case 6:s=r.sent,o=0;case 8:if(!(o<n.length)){r.next=19;break}if(n[o].number!=t.number){r.next=16;break}return n[o].messages=t.messages,r.next=13,Object(j.a)({type:"set_new_rooms",rooms:n});case 13:if(s!=t.number){r.next=16;break}return r.next=16,Object(j.a)({type:"set_messages",messages:t.messages});case 16:o++,r.next=8;break;case 19:case"end":return r.stop()}}),d)}function T(e){var t,n;return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.message,s.next=3,Object(j.b)(N);case 3:n=s.sent,p(n,t);case 5:case"end":return s.stop()}}),h)}function M(){l()}function S(e){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.c)("change_username",k);case 2:return e.next=4,Object(j.c)("accept_change_username",C);case 4:return e.next=6,Object(j.c)("join_to_room",R);case 6:return e.next=8,Object(j.c)("accept_join_to_room",D);case 8:return e.next=10,Object(j.c)("set_room",I);case 10:return e.next=12,Object(j.c)("send_message",T);case 12:return e.next=14,Object(j.c)("new_message_on_room",z);case 14:return e.next=16,Object(j.c)("get_new_room",M);case 16:case"end":return e.stop()}}),v)}var F=S;var L=Object(m.a)(),P=Object(u.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:null,rooms:[],room:null,roomID:null,messages:[],authorized:!1},t=arguments.length>1?arguments[1]:void 0;return"set_username"==t.type?Object(c.a)(Object(c.a)({},e),{},{username:t.username,authorized:!0}):"set_new_rooms"==t.type?Object(c.a)(Object(c.a)({},e),{},{rooms:t.rooms}):"set_main_data"==t.type?Object(c.a)(Object(c.a)({},e),{},{room:t.room,messages:t.messages,roomID:t.roomID}):"set_messages"==t.type?Object(c.a)(Object(c.a)({},e),{},{messages:t.messages}):e}),Object(u.a)(L));L.run(F);var U=P,B=(n(84),n(46)),J=n(16),A=(n(89),n(3));var E=function(e){var t=e.setUsername,n=Object(s.useState)(""),o=Object(J.a)(n,2),r=o[0],a=o[1];return Object(A.jsxs)("div",{className:"login-form",children:[Object(A.jsx)("p",{className:"login-form_heading",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d:"}),Object(A.jsx)("input",{type:"text",className:"login-form_username",value:r,onChange:function(e){return a(e.target.value)}}),Object(A.jsx)("button",{className:"login-form_login",onClick:function(){t(r)},children:"\u0412\u043e\u0439\u0442\u0438"})]})};var K=function(e){var t=e.rooms,n=e.setRoom,s=t.map((function(e,t){return Object(A.jsx)("button",{onClick:function(){n(t)},children:e.number},t*e.number)}));return Object(A.jsx)("div",{className:"chats",children:s})};var q=function(e){var t=e.getNewRoom,n=e.connectToRoom,o=Object(s.useState)(""),r=Object(J.a)(o,2),a=r[0],c=r[1];return Object(A.jsxs)("div",{className:"connect-to-chat",children:[Object(A.jsx)("input",{className:"input connect-to-chat_input",type:"number",maxLength:10,value:a,onChange:function(e){return t=e.target.value,void c(t);var t}}),Object(A.jsx)("button",{className:"connect-to-chat_connect-button",onClick:function(){n(a)},children:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f"}),Object(A.jsx)("button",{className:"connect-to-chat_new-button",onClick:t,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})};n(91);var G=function(e){var t=e.messages.map((function(e){return Object(A.jsxs)("div",{className:"message-box",children:[Object(A.jsx)("p",{className:"message-box_username",children:"".concat(e.username," ")}),Object(A.jsx)("p",{className:"message-box_message",children:e.message}),Object(A.jsx)("p",{className:"message-box_date",children:e.date})]})}));return Object(A.jsx)("div",{className:"list-of-messages",children:t})},H=n.p+"static/media/send.93ce65ce.png";n(92);var Q=function(e){var t=e.sendMessage,n=Object(s.useState)(""),o=Object(J.a)(n,2),r=o[0],a=o[1];return Object(A.jsxs)("div",{className:"text-input",children:[Object(A.jsx)("textarea",{className:"input text-input_message-form",maxLength:340,value:r,onChange:function(e){return a(e.target.value)},onKeyDown:function(e){13===e.keyCode&&(t(r),a(""),e.stopPropagation())}}),Object(A.jsx)("button",{className:"button text-input_send-button",onClick:function(e){t(r),a(""),e.stopPropagation()},children:Object(A.jsx)("img",{src:H,className:"text-input_send-button_img",alt:"#"})})]})};n(93);var V=Object(B.a)((function(e){return{username:e.username,room:e.room,rooms:e.rooms,messages:e.messages,authorized:e.authorized}}),(function(e){return{setUsername:function(t){return e({type:"change_username",username:t})},sendMessage:function(t){return e({type:"send_message",message:t})},setRoom:function(t){return e({type:"set_room",roomID:t})},getNewRoom:function(){e({type:"get_new_room"})},connectToRoom:function(t){e({type:"join_to_room",roomNumber:t})}}}))((function(e){var t=e.authorized,n=e.rooms,s=e.messages,o=e.setUsername,r=e.sendMessage,a=e.setRoom,c=e.getNewRoom,u=e.connectToRoom;return t?Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)(K,{rooms:n,setRoom:a}),Object(A.jsx)(q,{getNewRoom:c,connectToRoom:u}),Object(A.jsx)(G,{messages:s}),Object(A.jsx)(Q,{sendMessage:r})]}):Object(A.jsx)(E,{setUsername:o})})),W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,95)).then((function(t){var n=t.getCLS,s=t.getFID,o=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),s(e),o(e),r(e),a(e)}))};a.a.render(Object(A.jsx)(o.a.StrictMode,{children:Object(A.jsx)(V,{store:U})}),document.getElementById("root")),W()}},[[94,1,2]]]);
//# sourceMappingURL=main.870f95a0.chunk.js.map